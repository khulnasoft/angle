<?xml version="1.0" encoding="utf-8"?>
<Wix
  xmlns="http://schemas.microsoft.com/wix/2006/wi"
  xmlns:util="http://schemas.microsoft.com/wix/UtilExtension"
  >
  <Product
    Id="7FAD6F97-D84E-42CC-A600-5F4EC3460FF5"
    UpgradeCode="0596ECAA-4D39-48E9-AB23-DA89A85AE67E"
    Name="Angle"
    Version="$VERSION"
    Manufacturer="Angle Developers &lt;angle@datadoghq.com&gt;"
    Language="1033"
    >
    <Package
      Id="*"
      Description="Angle Installer"
      InstallerVersion="200"
      Compressed="yes"
      Languages="1033"
      Platform="x64"
      />
    <Icon
      Id="AngleIco"
      SourceFile="angle.ico"
      />
    <SetProperty
      Id="DocsURL"
      Value="https://angle.khulnasoft.com/docs"
      Sequence="execute"
      Before="CreateShortcuts"
      />
    <Icon
      Id="DocsIco"
      SourceFile="docs.ico"
      />
    <UIRef
      Id="WixUI_InstallDir"
      />
    <WixVariable
      Id="WixUIDialogBmp"
      Value="background.png"
      />
    <WixVariable
      Id="WixUIBannerBmp"
      Value="banner.png"
      />
    <WixVariable
      Id="WixUILicenseRtf"
      Value="LICENSE.rtf"
      />
    <Property
      Id="WIXUI_INSTALLDIR"
      Value="INSTALLDIR"
      />
    <Condition
      Message="You need to be an administrator to install Angle."
      >
      Privileged
    </Condition>
    <Media
      Id="1"
      Cabinet="angle.cab"
      EmbedCab="yes"
      />
    <Directory
      Id="TARGETDIR"
      Name="SourceDir"
      >
      <Directory
        Id="ProgramFiles64Folder"
        >
        <Directory
          Id="INSTALLDIR"
          Name="Angle"
          >
          <Component
            Id="AngleCmd"
            Guid="C96DDA4D-D2B7-4094-91E6-7350764A4866"
            Win64="yes"
            >
            <File
              Id="AngleCmd"
              DiskId="1"
              Source="angle-cmd.bat"
              />
          </Component>
        </Directory>
      </Directory>
      <Directory
        Id="ProgramMenuFolder"
        >
        <Directory
          Id="AngleStartMenuDir"
          Name="Angle"
          >
          <Component
            Id="AngleCmdShortcutComponent"
            Guid="6389769A-136F-4DEC-AB2D-ECD5BD448BA2"
            >
            <Shortcut
              Id="AngleCmdShortcut"
              Name="Angle CMD"
              Description="Angle's command prompt environment"
              Directory="AngleStartMenuDir"
              Icon="AngleIco"
              Target="[INSTALLDIR]angle-cmd.bat"
              />
            <Shortcut
              Id="AngleDocsShortcut"
              Name="Documentation"
              Description="Angle's documentation website"
              Directory="AngleStartMenuDir"
              Icon="DocsIco"
              Target="[DocsURL]"
              />
            <Shortcut
              Id="AngleConfigShortcut"
              Name="Configuration"
              Description="Angle's configuration folder"
              Directory="AngleStartMenuDir"
              Target="[INSTALLDIR]config"
              />
            <RemoveFolder
              Id="RemoveStartMenuDirAngleCmd"
              Directory="AngleStartMenuDir"
              On="uninstall"
              />
            <RegistryValue
              Root="HKCU"
              Key="Software\Angle"
              Name="installed"
              Type="integer"
              Value="1"
              KeyPath="yes"
              />
          </Component>
        </Directory>
      </Directory>
    </Directory>
    <Feature
      Id="Angle"
      Description="The complete installation."
      Level="1"
      Display="expand"
      ConfigurableDirectory="INSTALLDIR"
      >
      <ComponentGroupRef
        Id="Angle"
        />
      <ComponentRef
        Id="AngleCmd"
        />
      <ComponentRef
        Id="AngleCmdShortcutComponent"
        />
    </Feature>
  </Product>
</Wix>
